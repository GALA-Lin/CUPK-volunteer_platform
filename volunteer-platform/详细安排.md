# “油炬智愿”冲刺阶段任务清单 V1.2 (最终版)

**目标：** 以此为团队的唯一行动纲领，在 **7月7日** 前完成项目核心功能的开发与演示。

---

## 1. 任务总览与核心 API 端点

| 成员代号     | 负责模块         | 核心API端点 (负责设计与实现)                                                                                                                 |
|:---------|:-------------|:----------------------------------------------------------------------------------------------------------------------------------|
| **同学 A** | **用户与认证模块**  | `POST /api/auth/register`<br>`POST /api/auth/login`<br>`GET /api/users/me`<br>`PUT /api/users/me`                                 |
| **同学 B** | **志愿活动模块**   | `GET /api/activities`<br>`GET /api/activities/{id}`<br>`POST /api/activities/{id}/enroll`<br>`DELETE /api/activities/{id}/enroll` |
| **同学 C** | **新闻与内容模块**  | `GET /api/news`<br>`GET /api/news/{id}`<br>`POST /api/news/{id}/like`                                                             |
| **同学 D** | **后台管理核心**   | `POST /api/admin/activities`<br>`GET /api/admin/activities/{id}/enrollments`<br>`POST /api/admin/service-records`                 |
| **同学 E** | **统筹、组织与数据** | `GET /api/organizations`<br>`POST /api/organizations`<br>`GET /api/admin/dashboard/stats`                                         |

---

## 2. 成员详细任务分解

### **同学 A: 用户与认证模块**

你的核心职责是构建系统的用户体系，确保用户可以安全地注册、登录、并管理自己的信息。

#### **后端 (Backend) 任务:**

* **设计并实现以下 API 接口:**
    1.  `POST /api/auth/register`
        * **作用:** 用户注册。
        * **逻辑:** 接收用户名、密码等信息，对密码进行加密存储，然后将新用户信息存入 `users` 表。
    2.  `POST /api/auth/login`
        * **作用:** 用户登录。
        * **逻辑:** 验证用户名和密码，如果成功，生成一个 JWT Token 并返回给前端。
    3.  `GET /api/users/me`
        * **作用:** 获取当前登录用户的信息。
        * **逻辑:** 从前端请求带来的 Token 中解析出用户 ID，然后查询数据库返回该用户的详细信息。
    4.  `PUT /api/users/me`
        * **作用:** 更新当前用户的个人信息。
        * **逻辑:** 允许用户修改自己的真实姓名、邮箱、手机号等信息。

#### **前端 (Frontend) 任务:**

* **需要开发的网页:**
    1.  `登录页 (/login)`: 创建一个包含用户名和密码输入框的登录表单。
    2.  `注册页 (/register)`: 创建一个包含必填项的注册表单。
    3.  `个人中心页 (/profile)`: 展示当前用户的详细信息，并提供一个表单来修改这些信息。
* **需要实现的功能:**
    * 调用登录/注册接口，并根据返回结果给出提示。
    * 登录成功后，将 Token 保存到浏览器中（如 Pinia 或 localStorage）。
    * 配置前端路由守卫，实现未登录用户无法访问个人中心页等受保护的路由。

---

### **同学 B: 志愿活动模块**

你的核心职责是构建平台的主要业务功能，让志愿者能够浏览、搜索并参与到志愿活动中。

#### **后端 (Backend) 任务:**

* **设计并实现以下 API 接口:**
    1.  `GET /api/activities`
        * **作用:** 获取所有可参加的志愿活动列表。
        * **逻辑:** 从 `activities` 表中查询数据，需要支持分页功能，以便前端可以一页一页地加载。
    2.  `GET /api/activities/{id}`
        * **作用:** 根据活动 ID 获取单个活动的详细信息。
    3.  `POST /api/activities/{id}/enroll`
        * **作用:** 用户报名参加指定活动。
        * **逻辑:** 在 `enrollments` 表中创建一条记录，并将 `activities` 表中对应活动的 `current_enrollment` 字段加一。需要进行权限和逻辑检查（如用户是否已登录，活动是否满员等）。
    4.  `DELETE /api/activities/{id}/enroll`
        * **作用:** 用户取消已报名的活动。

#### **前端 (Frontend) 任务:**

* **需要开发的网页:**
    1.  `活动广场页 (/activities)`: 以卡片列表的形式，图文并茂地展示所有活动。
    2.  `活动详情页 (/activities/:id)`: 展示活动的标题、描述、时间、地点、主办方、已报名人数等所有详细信息。
* **需要实现的功能:**
    * 在活动广场页，调用API获取活动数据并渲染，实现“加载更多”或页码分页的功能。
    * 在活动详情页，根据用户的报名状态，显示“立即报名”或“取消报名”按钮，并实现相应的点击交互。
    * 在个人中心页中，需要有一个“我报名的活动”列表，展示该用户所有报名记录。

---

### **同学 C: 新闻与内容模块**

你的核心职责是让平台的内容丰富起来，为用户提供新闻资讯。

#### **后端 (Backend) 任务:**

* **设计并实现以下 API 接口:**
    1.  `GET /api/news`
        * **作用:** 获取新闻列表。
        * **逻辑:** 从 `news` 表中查询数据，支持分页。
    2.  `GET /api/news/{id}`
        * **作用:** 根据 ID 获取单篇新闻的详细内容。
    3.  `POST /api/news/{id}/like`
        * **作用:** 用户点赞新闻。
        * **逻辑 (简化版):** 接收到请求后，直接将 `news` 表中对应记录的 `likes_count` 字段加一即可。

#### **前端 (Frontend) 任务:**

* **需要开发的网页:**
    1.  `新闻资讯页 (/news)`: 以列表形式展示所有新闻的标题、摘要和发布时间。
    2.  `新闻详情页 (/news/:id)`: 展示新闻的完整标题和正文内容。
* **需要实现的功能:**
    * 调用 API 获取新闻数据并展示。
    * 实现点击新闻列表项，跳转到对应的新闻详情页。
    * 在详情页底部，放置一个“点赞”按钮，点击后调用 API 并实时更新页面上的点赞数。

---

### **同学 D: 后台管理核心**

你的核心职责是为管理员提供强大的后台管理能力，确保平台的正常运营。

#### **后端 (Backend) 任务:**

* **设计并实现以下 API 接口 (所有接口都需要管理员权限):**
    1.  `POST /api/admin/activities`
        * **作用:** 管理员发布新活动。
    2.  `GET /api/admin/activities/{id}/enrollments`
        * **作用:** 查看指定活动的所有报名人员列表。
    3.  `POST /api/admin/service-records`
        * **作用:** 管理员为指定用户手动登记某次活动的服务时长。
        * **逻辑:** 在 `service_records` 表中创建记录，并同步更新 `users` 表中该用户的 `total_service_hours` 字段。

#### **前端 (Frontend) 任务:**

* **需要开发的网页 (后台管理界面):**
    1.  `后台-活动管理页 (/admin/activities)`: 用表格展示所有活动，并提供“编辑”、“删除”、“查看报名”等操作按钮。包含一个用于“发布新活动”的表单。
    2.  `后台-报名详情页 (/admin/activities/:id/enrollments)`: 展示某个活动的所有报名者列表。
    3.  `后台-时长录入页 (/admin/records)`: 提供一个表单，让管理员可以选择用户和活动，并输入时长进行登记。

---

### **同学 E: 统筹、组织与数据**

你的核心职责是保证项目基础稳固，负责组织模块和数据看板，并协调团队解决技术难题。

#### **后端 (Backend) 任务:**

* **设计并实现以下 API 接口:**
    1.  `GET /api/organizations`
        * **作用:** 获取所有组织部门的列表。
    2.  `POST /api/organizations`
        * **作用:** (管理员)创建新的组织部门。
    3.  `GET /api/admin/dashboard/stats`
        * **作用:** 为后台的数据看板提供统计数据。
        * **逻辑:** 需要编写聚合查询，返回例如：平台总用户数、活动总数、累计总服务时长等核心指标。

#### **前端 (Frontend) 任务:**

* **需要开发的网页:**
    1.  `组织列表页 (/organizations)`: 展示所有已创建的组织部门信息。
    2.  `后台-数据看板页 (/admin/dashboard)`: 调用 API 获取统计数据，并使用图表库（如 ECharts）将数据可视化展示出来，例如用柱状图展示各组织人数，用饼图展示时长分布等。

#### **统筹 (Project-level) 任务:**

1.  **数据库:** 牵头组织大家讨论数据库表结构，并最终负责编写、提交和维护 `sql/V1__initial_schema.sql` 脚本文件。
2.  **前端骨架:** 负责使用 `npm create vue@latest` 初始化我们项目的前端仓库骨架，配置好路由 (`vue-router`) 和状态管理 (`pinia`)，并推送给团队。
3.  **环境协调:** 作为项目环境问题的“第一响应人”，协助解决团队成员遇到的 Git、Docker 等环境问题。