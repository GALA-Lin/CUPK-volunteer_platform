### API 设计指导 - 后台管理核心 (同学 D)

**负责人：** 同学 D
**目标：** 在 Apifox 中，完整定义以下 5 个核心 API 接口。

**特别注意：** 你负责的所有接口，都需要进行**管理员权限校验**。这意味着在后端实现时，需要检查发起请求的用户角色是否为 `admin` 或 `super_admin`。

---

#### 规范总览 (请务必遵守)

* **接口路径前缀:** 你所有的接口路径都必须以 `/api/admin/` 开头。
* **全局响应结构:** 所有返回数据都必须是 `{ "code": xxx, "message": "...", "data": ... }` 格式。
* **JSON 字段命名:** 所有请求和响应的 JSON 字段，全部使用**小驼峰命名法 (camelCase)**。

---

### 1. 发布新活动接口

这是管理员创建新活动的功能。

* **接口名称:** (管理员)发布新活动
* **请求方法:** `POST`
* **请求路径:** `/api/admin/activities`
* **功能描述:** 管理员创建一个新的志愿活动。

* **请求体 (Request Body - `application/json`)**
    ```json
    {
      "title": "图书馆整理图书活动",
      "description": "<p>协助图书馆老师整理新到书籍，并进行分类上架。</p>",
      "coverImageUrl": "[http://example.com/library-cover.jpg](http://example.com/library-cover.jpg)",
      "category": "校内服务",
      "location": "学校图书馆三楼",
      "startTime": "2025-07-15 09:00:00",
      "endTime": "2025-07-15 17:00:00",
      "organizerId": 1,
      "recruitmentQuota": 20
    }
    ```

* **成功响应 (Success - `201 Created`)**
    ```json
    {
      "code": 201,
      "message": "活动发布成功",
      "data": {
        "id": 15,
        "title": "图书馆整理图书活动",
        "status": "recruiting"
      }
    }
    ```

* **失败响应 (Error - `403 Forbidden`)** (示例：非管理员访问)
    ```json
    {
      "code": 403,
      "message": "无权操作，需要管理员权限",
      "data": null
    }
    ```

---

### 2. 更新活动接口

允许管理员修改已发布的活动信息。

* **接口名称:** (管理员)更新活动
* **请求方法:** `PUT`
* **请求路径:** `/api/admin/activities/{id}`
* **功能描述:** 更新指定ID的活动信息。

* **请求体 (Request Body - `application/json`)**
    * (与发布活动的请求体结构相同，但所有字段均为可选)

* **成功响应 (Success - `200 OK`)**
    ```json
    {
      "code": 200,
      "message": "更新成功",
      "data": {
        "id": 15,
        "title": "图书馆整理图书活动 (更新)",
        "location": "学校图书馆四楼"
      }
    }
    ```

---

### 3. 删除活动接口

允许管理员删除活动。

* **接口名称:** (管理员)删除活动
* **请求方法:** `DELETE`
* **请求路径:** `/api/admin/activities/{id}`
* **功能描述:** 删除指定ID的活动。

* **成功响应 (Success - `200 OK`)**
    ```json
    {
      "code": 200,
      "message": "删除成功",
      "data": null
    }
    ```

---

### 4. 查看活动报名名单接口

为管理员提供指定活动的报名人员列表。

* **接口名称:** (管理员)查看活动报名名单
* **请求方法:** `GET`
* **请求路径:** `/api/admin/activities/{id}/enrollments`
* **功能描述:** 获取指定活动的所有报名人员列表，支持分页。

* **请求参数 (Query Parameters)**
    * `page` (number, 可选, 默认 `1`): 查询第几页。
    * `pageSize` (number, 可选, 默认 `10`): 每页返回多少条数据。

* **成功响应 (Success - `200 OK`)**
    ```json
    {
      "code": 200,
      "message": "查询成功",
      "data": {
        "total": 18,
        "list": [
          {
            "userId": 2,
            "realName": "张三",
            "studentId": "2021010101",
            "phoneNumber": "18812345678",
            "enrolledAt": "2025-07-10 11:30:00"
          }
        ]
      }
    }
    ```

---

### 5. 登记服务时长接口

管理员为用户手动录入服务时长的核心功能。

* **接口名称:** (管理员)登记服务时长
* **请求方法:** `POST`
* **请求路径:** `/api/admin/service-records`
* **功能描述:** 为指定用户参与的指定活动登记服务时长。

* **请求体 (Request Body - `application/json`)**
    ```json
    {
      "userId": 2,
      "activityId": 15,
      "serviceHours": 8.0,
      "remarks": "该同学认真负责，全勤参与。"
    }
    ```

* **成功响应 (Success - `201 Created`)**
    ```json
    {
      "code": 201,
      "message": "时长登记成功",
      "data": null
    }
    ```

**@同学 D**，以上是你需要设计的后台核心接口。请现在开始在 Apifox 中进行设计。
